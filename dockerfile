# Базовый образ с Java 11 и Maven (для сборки проекта)
FROM maven:3.8.6-jdk-11

# Рабочая директория внутри контейнера
WORKDIR /app

# Копируем файл зависимостей (чтобы кэшировать их)
COPY pom.xml .

# Копируем исходный код тестов
COPY src ./src

# Загружаем зависимости (выполняется только при изменении pom.xml)
RUN mvn dependency:resolve

# Команда для запуска тестов при старте контейнера
CMD mvn test -Dtest=ParallelTests